<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Robert's Posts - Robert Tolan">
    <meta name="keywords" content="Robert Tolan, Posts">
    <title>Posts - Robert Tolan</title>
    <link rel="stylesheet" type="text/css" href="https://cdn.rawgit.com/dreampulse/computer-modern-web-font/master/fonts.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="icon" type="image/x-icon" href="/img/favicon2.ico">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <style>
        .section-content {
            display: none;
            padding: 0;
            margin-top: -10px;
        }
        .section-content.active {
            display: block;
        }
        .section-title {
            cursor: pointer;
            margin-bottom: 10px;
        }
        .post-preview {
            padding: 20px 0;
        }
        .post-title {
            font-size: 24px;
            margin-bottom: 10px;
            cursor: pointer;
            position: relative;
        }
        .post-content {
            transition: max-height 0.3s ease-out;
            max-height: 1000px;
            overflow: hidden;
        }
        .post-content.hidden {
            max-height: 0;
        }
        .read-more {
            color: #8B008B;
            text-decoration: none;
        }
        .read-more:hover {
            text-decoration: underline;
        }
        
        /* Newsletter Section Styles - Clean & Sleek */
        .newsletter-section {
            background: #ffffff;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 16px;
            margin: 20px 0;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            transition: box-shadow 0.2s ease;
            max-width: 500px;
        }
        
        .newsletter-section:hover {
            box-shadow: 0 4px 16px rgba(139, 0, 139, 0.12);
            transform: translateY(-1px);
        }
        
        .newsletter-section h3 {
            color: #111827;
            margin: 0 0 6px 0;
            font-size: 15px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }
        
        .newsletter-section h3 i {
            color: #8B008B;
            font-size: 13px;
        }
        
        .newsletter-section p {
            color: #6b7280;
            margin: 0 0 12px 0;
            font-size: 12px;
            line-height: 1.3;
        }
        
        .newsletter-form {
            max-width: 460px;
            margin: 0 auto;
        }
        
        .newsletter-form .form-row {
            display: flex;
            gap: 8px;
            flex-wrap: nowrap;
            align-items: stretch;
        }
        
        .newsletter-input {
            flex: 1;
            min-width: 0;
            padding: 8px 10px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 12px;
            font-family: inherit;
            background: #ffffff;
            color: #374151;
            transition: all 0.2s ease;
            height: 36px;
            box-sizing: border-box;
        }
        
        .newsletter-input::placeholder {
            color: #9ca3af;
        }
        
        .newsletter-input:focus {
            outline: none;
            border-color: #8B008B;
            box-shadow: 0 0 0 3px rgba(139, 0, 139, 0.1);
        }
        
        .newsletter-btn {
            background: #8B008B;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 4px;
            white-space: nowrap;
            height: 36px;
            box-sizing: border-box;
            flex-shrink: 0;
        }
        
        .newsletter-btn:hover {
            background: #6a006a;
            transform: translateY(-1px);
        }
        
        .newsletter-btn:active {
            transform: translateY(0);
        }
        
        .newsletter-message {
            margin-top: 12px;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .newsletter-message.success {
            background: #f0fdf4;
            color: #166534;
            border: 1px solid #bbf7d0;
        }
        
        .newsletter-message.error {
            background: #fef2f2;
            color: #dc2626;
            border: 1px solid #fecaca;
        }
        
        /* Mobile responsiveness */
        @media (max-width: 768px) {
            .newsletter-section {
                padding: 16px;
                margin: 20px 0;
                max-width: 100%;
            }
            
            .newsletter-form .form-row {
                flex-direction: column;
                gap: 8px;
            }
            
            .newsletter-input {
                min-width: auto;
            }
            
            .newsletter-btn {
                width: 100%;
                justify-content: center;
            }
        }
@media (max-width: 768px) {
    body, html {
        background: #ffffff;
        position: relative;
        min-height: 100%;
        width: 100%;
        overflow-x: hidden;
    }
    .desktopleft {
        display: none !important;
    }
    #mobilephoto {
        width: 100%;
        max-width: 300px;
        display: block;
        margin: 0 auto;
        position: relative;
        z-index: 1;
    }
    .mobileleft {
        width: 100%;
        position: relative;
        z-index: 1;
        margin: 20px 0;
        padding: 0;
        background: #ffffff;
    }
    #mobilenav {
        position: relative;
        z-index: 1;
        background: #ffffff;
        width: 100%;
        margin: 0;
        padding: 0;
        list-style: none;
    }
    .right {
        position: relative;
        z-index: 1;
        background: #ffffff;
        width: 100%;
        margin-top: 20px;
        clear: both;
    }
    * {
        background: #ffffff;
    }
}
    </style>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XGRVMPLY74"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-XGRVMPLY74');
    </script>
        <script src="js/analytics.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/public-config.js"></script>
    <script src="js/supabase-newsletter.js"></script>
</head>
<body>

<div class="desktopleft">
    <img src="img/robert.jpg" id="desktopphoto" width="100%" align="top" alt="Robert Tolan">
    <ul id="desktopnav">
        <li><a href="index.html">Home</a></li>
        <li><a class="active" href="posts.html">Posts</a></li>
        <li><a href="recommendations.html">Recommendations</a></li>
        <li><a href="projects.html">Projects</a></li>
        <li><a href="mailto:robertmtolan1@gmail.com"><i class="fas fa-envelope social-icon"></i>Email</a></li>
        <li><a href="https://x.com/Rob_Tolan" target="_blank"><i class="fab fa-twitter social-icon"></i>X</a></li>
    </ul>
</div>

<h1 id="mobiletop">Robert Tolan</h1>
<img src="img/robert.jpg" id="mobilephoto" width="100%" align="top" alt="Robert Tolan">
<div class="mobileleft">
    <ul id="mobilenav">
        <li><a href="index.html">Home</a></li>
        <li><a class="active" href="posts.html">Posts</a></li>
        <li><a href="recommendations.html">Recommendations</a></li>
        <li><a href="projects.html">Projects</a></li>
        <li><a href="mailto:robertmtolan1@gmail.com"><i class="fas fa-envelope social-icon"></i>Email</a></li>
        <li><a href="https://twitter.com/Rob_Tolan" target="_blank"><i class="fab fa-twitter social-icon"></i>X</a></li>
    </ul>
</div>

<div class="right">
    <h1>Posts</h1>
    


    <!-- Newsletter Signup Section -->
    <div class="newsletter-section">
        <h3><i class="fas fa-envelope"></i> Subscribe to My Posts!</h3>

        <form id="newsletterForm" class="newsletter-form">
            <div class="form-row">
                <input type="text" id="subscriberName" placeholder="Your name (optional)" class="newsletter-input">
                <input type="email" id="subscriberEmail" placeholder="Your email address" class="newsletter-input" required>
                <button type="submit" class="newsletter-btn">
                    <i class="fas fa-paper-plane"></i> Subscribe
                </button>
            </div>
        </form>
        
        <div class="newsletter-message" id="newsletterMessage" style="display: none;"></div>
    </div>

    <div class="post-preview">
        <h2 class="post-title collapsed">Whale Watching</h2>
        <div class="post-content hidden">
            <p>Spending some time in credit derivatives got me interested in when things go wrong and one of the more intriguing cases is 2012's London Whale. The main characters are Bruno Iksil and JP Morgan, the loss led to a court case. At one stage, Iksil ran a blog called the Marionette which
                told his side of the story which has since been largely ignored by the media. Some months prior to the blog going offline, I downloaded its contents.
                I am making them available here for posterity.

                <p><a href="docs/derivatives/What is the London Whale.pdf" target="_blank">'What is the London Whale'</a> A description of the loss.</p>
                <p><a href="docs/derivatives/Iksil - facts, realities and dates.pdf" target="_blank">'Facts, Realities and Dates'</a> A timeline. </p>
                <p><a href="docs/derivatives/Preamble.pdf" target="_blank">'Preamble'</a> A rationale.</p>
                <p><a href="docs/derivatives/Official version vs Iksil story.pdf" target="_blank">'Official version vs Iksil's Story'</a> Where paths diverge.</p>
                <p><a href="docs/derivatives/Reliability.pdf" target="_blank">'Reliability'</a> More intrigue.</p>
                <p><a href="docs/derivatives/Morphing Tales.pdf" target="_blank">'Morphing Tales'</a> Down the rabbit hole.</p>
                <p><a href="docs/derivatives/Possible gains from the event.pdf" target="_blank">'Possible Gains'</a> Possible gains from the event.</p>
                <p><a href="docs/derivatives/Memo on 2012 gains.pdf" target="_blank">'Memo on 2012 Gains'</a> More evidence for potential gains.</p>
                <p><a href="docs/derivatives/Iksil Press Communication.pdf" target="_blank">'Press Communications'</a> Iksil's communications with the press.</p>
                <p><a href="docs/derivatives/VaR history.pdf" target="_blank">'A History of VaR'</a> A history of VaR that appeared in the French press at the time.</p>

            </p>
        </div>
    </div>

    <div class="post-preview">
        <h2 class="post-title collapsed">A Simple and Elegant Response to Ireland's Housing Crisis</h2>
        <div class="post-content hidden">
            <p>An essay that appeared in <a href="https://www.thefitzwilliam.com/" target="_blank">The Fitzwilliam</a>, an Irish journal of ideas, on what became <a href="https://betterplanning.ie/street-plans/" target="_blank">Street Plans</a>. The original idea was heavily influenced by England's <a href="https://yimbyalliance.org/street-votes/" target="_blank">Street Votes proposal</a>.</p>
            <a class="read-more" href="https://www.thefitzwilliam.com/p/a-simple-and-elegant-response-to" target="_blank">Read More</a>
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    const postTitles = document.querySelectorAll('.post-title');

    postTitles.forEach(title => {
        title.addEventListener('click', function() {
            this.classList.toggle('collapsed');
            const content = this.nextElementSibling;
            content.classList.toggle('hidden');
        });
    });

    // Newsletter signup functionality
    const newsletterForm = document.getElementById('newsletterForm');
    const newsletterMessage = document.getElementById('newsletterMessage');
    const supabaseNewsletter = new SupabaseNewsletter();

    newsletterForm.addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const email = document.getElementById('subscriberEmail').value;
        const name = document.getElementById('subscriberName').value;
        const submitBtn = newsletterForm.querySelector('button[type="submit"]');
        
        // Show loading state
        submitBtn.disabled = true;
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Subscribing...';
        newsletterMessage.style.display = 'none';
        
        try {
            await supabaseNewsletter.addSubscriber(email, name);
            
            // Show success message
            newsletterMessage.className = 'newsletter-message success';
            newsletterMessage.innerHTML = '<i class="fas fa-check-circle"></i> Successfully subscribed! You\'ll receive new posts via email.';
            newsletterMessage.style.display = 'block';
            
            // Clear form
            newsletterForm.reset();
            
        } catch (error) {
            // Show error message
            newsletterMessage.className = 'newsletter-message error';
            newsletterMessage.innerHTML = '<i class="fas fa-exclamation-circle"></i> ' + error.message;
            newsletterMessage.style.display = 'block';
        } finally {
            // Reset button
            submitBtn.disabled = false;
            submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Subscribe';
        }
    });
});
</script>
</body>
</html>
