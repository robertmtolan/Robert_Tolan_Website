<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Robert's Posts - Robert Tolan">
    <meta name="keywords" content="Robert Tolan, Posts">
    <title>Posts - Robert Tolan</title>
    <link rel="stylesheet" type="text/css" href="https://cdn.rawgit.com/dreampulse/computer-modern-web-font/master/fonts.css">
    <link rel="stylesheet" type="text/css" href="css/main.css?v=1">
    <link rel="icon" type="image/x-icon" href="/img/favicon2.ico">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <style>
        /* Force active navigation to be black - highest priority */
        body div.desktopleft ul#desktopnav li a.active,
        body div.mobileleft ul#mobilenav li a.active,
        ul#desktopnav li a.active,
        ul#mobilenav li a.active,
        a.active {
            color: black !important;
            font-weight: bold !important;
        }
        
        .section-content {
            display: none;
            padding: 0;
            margin-top: -10px;
        }
        .section-content.active {
            display: block;
        }
        .section-title {
            cursor: pointer;
            margin-bottom: 10px;
        }
        .post-preview {
            padding: 25px 0;
            border-bottom: 1px solid #eee;
        }
        .post-preview:last-child {
            border-bottom: none;
        }
        .post-title {
            font-size: 24px;
            margin-bottom: 15px;
        }
        .post-title a {
            color: black;
            text-decoration: none;
            transition: color 0.2s ease;
        }
        .post-title a:hover {
            color: #8B008B;
        }
        .post-excerpt {
            margin-bottom: 15px;
        }
        .post-excerpt p {
            color: black;
            line-height: 1.6;
            margin-bottom: 15px;
        }
        .post-meta {
            display: flex;
            gap: 15px;
            align-items: center;
            font-size: 14px;
            color: black;
        }
        .post-date {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .post-category {
            background: #8B008B;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            text-transform: uppercase;
        }
        
        /* Newsletter Section Styles - Clean & Sleek */
        .newsletter-section {
            background: #ffffff;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 16px;
            margin: 20px 0;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            transition: box-shadow 0.2s ease;
            max-width: 500px;
        }
        
        .newsletter-section:hover {
            box-shadow: 0 4px 16px rgba(139, 0, 139, 0.12);
            transform: translateY(-1px);
        }
        
        .newsletter-section h3 {
            color: #111827;
            margin: 0 0 6px 0;
            font-size: 15px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }
        
        .newsletter-section h3 i {
            color: #8B008B;
            font-size: 13px;
        }
        
        .newsletter-section p {
            color: black;
            margin: 0 0 12px 0;
            font-size: 12px;
            line-height: 1.3;
        }
        
        .newsletter-form {
            max-width: 460px;
            margin: 0 auto;
        }
        
        .newsletter-form .form-row {
            display: flex;
            gap: 8px;
            flex-wrap: nowrap;
            align-items: stretch;
        }
        
        .newsletter-input {
            flex: 1;
            min-width: 0;
            padding: 8px 10px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 12px;
            font-family: inherit;
            background: #ffffff;
            color: #374151;
            transition: all 0.2s ease;
            height: 36px;
            box-sizing: border-box;
        }
        
        .newsletter-input::placeholder {
            color: #9ca3af;
        }
        
        .newsletter-input:focus {
            outline: none;
            border-color: #8B008B;
            box-shadow: 0 0 0 3px rgba(139, 0, 139, 0.1);
        }
        
        .newsletter-btn {
            background: #8B008B;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 4px;
            white-space: nowrap;
            height: 36px;
            box-sizing: border-box;
            flex-shrink: 0;
        }
        
        .newsletter-btn:hover {
            background: #6a006a;
            transform: translateY(-1px);
        }
        
        .newsletter-btn:active {
            transform: translateY(0);
        }
        
        .newsletter-message {
            margin-top: 12px;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .newsletter-message.success {
            background: #f0fdf4;
            color: #166534;
            border: 1px solid #bbf7d0;
        }
        
        .newsletter-message.error {
            background: #fef2f2;
            color: #dc2626;
            border: 1px solid #fecaca;
        }
        
        /* Mobile responsiveness */
        @media (max-width: 768px) {
            body, html {
                background: #ffffff;
                position: relative;
                min-height: 100%;
                width: 100%;
                overflow-x: hidden;
            }
            
            .desktopleft {
                display: none !important;
            }
            
            #mobilephoto {
                width: 100%;
                max-width: 300px;
                display: block;
                margin: 0 auto;
                position: relative;
                z-index: 1;
            }
            
            .mobileleft {
                width: 100%;
                position: relative;
                z-index: 1;
                margin: 20px 0;
                padding: 0;
                background: #ffffff;
            }
            
            #mobilenav {
                position: relative;
                z-index: 1;
                background: #ffffff;
                width: 100%;
                margin: 0;
                padding: 0;
                list-style: none;
            }
            
            .right {
                position: relative;
                z-index: 1;
                background: #ffffff;
                width: 100%;
                margin-top: 20px;
                clear: both;
            }
            
            .newsletter-section {
                padding: 16px;
                margin: 20px 0;
                max-width: 100%;
            }
            
            .newsletter-form .form-row {
                flex-direction: column;
                gap: 8px;
            }
            
            .newsletter-input {
                min-width: auto;
            }
            
            .newsletter-btn {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XGRVMPLY74"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-XGRVMPLY74');
    </script>
        <script src="js/analytics.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/public-config.js"></script>
    <script src="js/supabase-newsletter.js"></script>
</head>
<body>

<div class="desktopleft">
    <img src="img/robert.jpg" id="desktopphoto" width="100%" align="top" alt="Robert Tolan">
    <ul id="desktopnav">
        <li><a href="index.html">Home</a></li>
        <li><a class="active" href="posts.html">Posts</a></li>
        <li><a href="recommendations.html">Recommendations</a></li>
        <li><a href="projects.html">Projects</a></li>
        <li><a href="mailto:robertmtolan1@gmail.com"><i class="fas fa-envelope social-icon"></i>Email</a></li>
        <li><a href="https://x.com/Rob_Tolan" target="_blank"><i class="fab fa-twitter social-icon"></i>X</a></li>
    </ul>
</div>

<h1 id="mobiletop">Robert Tolan</h1>
<img src="img/robert.jpg" id="mobilephoto" width="100%" align="top" alt="Robert Tolan">
<div class="mobileleft">
    <ul id="mobilenav">
        <li><a href="index.html">Home</a></li>
        <li><a class="active" href="posts.html">Posts</a></li>
        <li><a href="recommendations.html">Recommendations</a></li>
        <li><a href="projects.html">Projects</a></li>
        <li><a href="mailto:robertmtolan1@gmail.com"><i class="fas fa-envelope social-icon"></i>Email</a></li>
        <li><a href="https://twitter.com/Rob_Tolan" target="_blank"><i class="fab fa-twitter social-icon"></i>X</a></li>
    </ul>
</div>

<div class="right">
    <h1>Posts</h1>
    


    <!-- Newsletter Signup Section -->
    <div class="newsletter-section">
        <h3><i class="fas fa-envelope"></i> Subscribe to My Posts!</h3>

        <form id="newsletterForm" class="newsletter-form">
            <div class="form-row">
                <input type="text" id="subscriberName" placeholder="Your name (optional)" class="newsletter-input">
                <input type="email" id="subscriberEmail" placeholder="Your email address" class="newsletter-input" required>
                <button type="submit" class="newsletter-btn">
                    <i class="fas fa-paper-plane"></i> Subscribe
                </button>
            </div>
        </form>
        
        <div class="newsletter-message" id="newsletterMessage" style="display: none;"></div>
    </div>

    <div class="post-preview">
        <h2 class="post-title">
            <a href="posts/whale-watching.html">Whale Watching</a>
        </h2>
        <div class="post-excerpt">
            <p>Spending some time in credit derivatives got me interested in when things go wrong and one of the more intriguing cases is 2012's London Whale. The main characters are Bruno Iksil and JP Morgan, the loss led to a court case. At one stage, Iksil ran a blog called the Marionette which told his side of the story which has since been largely ignored by the media.</p>
            <div class="post-meta">
                <span class="post-date">January 15, 2025</span>
            </div>
        </div>
    </div>


</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {

    // Newsletter signup functionality
    const newsletterForm = document.getElementById('newsletterForm');
    const newsletterMessage = document.getElementById('newsletterMessage');
    const supabaseNewsletter = new SupabaseNewsletter();

    newsletterForm.addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const email = document.getElementById('subscriberEmail').value;
        const name = document.getElementById('subscriberName').value;
        const submitBtn = newsletterForm.querySelector('button[type="submit"]');
        
        // Show loading state
        submitBtn.disabled = true;
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Subscribing...';
        newsletterMessage.style.display = 'none';
        
        try {
            await supabaseNewsletter.addSubscriber(email, name);
            
            // Show success message
            newsletterMessage.className = 'newsletter-message success';
            newsletterMessage.innerHTML = '<i class="fas fa-check-circle"></i> Successfully subscribed! You\'ll receive new posts via email.';
            newsletterMessage.style.display = 'block';
            
            // Clear form
            newsletterForm.reset();
            
        } catch (error) {
            // Show error message
            newsletterMessage.className = 'newsletter-message error';
            newsletterMessage.innerHTML = '<i class="fas fa-exclamation-circle"></i> ' + error.message;
            newsletterMessage.style.display = 'block';
        } finally {
            // Reset button
            submitBtn.disabled = false;
            submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Subscribe';
        }
    });
});
</script>
</body>
</html>
